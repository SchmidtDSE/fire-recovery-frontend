<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;700&display=swap" rel="stylesheet">
    <title>Fire Recovery: Fire Severity</title>
    <link rel="stylesheet" type="text/css" href="./css/style.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-draw@1.0.4/dist/leaflet.draw.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css">
</head>

<body>

    <nav class="navbar">
        <ul class="nav-list">
            <li class="nav-item home"><a href="index.html">Home</a></li>
            <div class="center-links">
                <li class="nav-item"><a href="fireSeverity.html">Fire Severity</a></li>
                <li class="nav-item"><a href="vegModel.html">Vegetation Modeling</a></li>
                <li class="nav-item"><a href="resourceOpt.html">Resource Optimization</a></li>
            </div>
            <li class="nav-item login"><a href="#">Login</a></li>
        </ul>
    </nav>

    <!-- HEADER IMAGE -->
    <header class="hero-image">
        <div class="black-bar"></div>
        <div class="hero-text-box">
            <h1>Assess Fire Severity</h1>
        </div>
    </header>

    <div class="form-map-container">
        <!-- upload shapefile -->
        <div class="upload-and-date-container">
            <label for="uploadShapefile" class="custom-file-upload">Upload Shapefile</label>
            <input type="file" id="uploadShapefile" accept=".zip" style="display:none" />
            <span id="uploadStatus" class="status-message"></span>

            <h3 class="section-heading">Set date range for fire:</h3>

            <form id="date-form" class="date-form">
                <div class="date-row">
                    <div class="date-field-container">
                        <label class="date-label" for="prefire-start-date">Prefire Start Date:</label>
                        <input class="date-field" type="date" id="prefire-start-date" name="prefireStartDate" required>
                    </div>

                    <div class="date-field-container">
                        <label class="date-label" for="prefire-end-date">Prefire End Date:</label>
                        <input class="date-field" type="date" id="prefire-end-date" name="prefireEndDate" required>
                    </div>
                </div>

                <div class="date-row">
                    <div class="date-field-container">
                        <label class="date-label" for="postfire-start-date">Postfire Start Date:</label>
                        <input class="date-field" type="date" id="postfire-start-date" name="postfireStartDate" required>
                    </div>

                    <div class="date-field-container">
                        <label class="date-label" for="postfire-end-date">Postfire End Date:</label>
                        <input class="date-field" type="date" id="postfire-end-date" name="postfireEndDate" required>
                    </div>
                </div>

                <div class="processing-test-section">
                    <h3 class="section-heading">Submit dates along with a shapefile or drawn polygon:</h3>
                    <div class="processing-test-container">
                        <button id="test-process-button" type="button" class="form-submit-button custom-file-upload">
                            Get Burn Metrics
                        </button>
                        <span id="process-status" style="margin-left: 10px; font-size: 1.5em; vertical-align: middle;"></span>
                    </div>
                </div>
            </form>

            <!-- metrics container -->
            <div id="metrics-container">
                <div class="date-summary-container">
                    <h3 class="section-heading metrics-heading">Selected Date Ranges:</h3>
                    <div id="prefire-dates"></div>
                    <div id="postfire-dates"></div>
                </div>
                
                <h3 class="section-heading metrics-heading">Overall Fire Severity:</h3>
                <div id="fire-severity-metric"></div>

                <h3 class="section-heading metrics-heading">Percent of Total Park Biomass Lost:</h3>
                <div id="biomass-lost-metric"></div>
            </div>


        <!-- Veg Map Table -->
        <div id="table-container">
            <table id="example" class="display" style="width:100%">
                <thead>
                    <tr>
                        <th>Color</th>
                        <th>Vegetation</th>
                        <th>Approximate Quantity</th>
                        <th>Percent of Full Park</th>
                        <th>Percent of Burn Area</th>
                        <th>Burn Severity</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Rows will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

        <!-- map view buttons -->
        <div class="map-container">
            <div class="button-container">
                <button class="map-button active">Street Map</button>
                <button class="map-button">Satellite Map</button>
                <button class="map-button">Vegetation Map</button>
            </div>

            <div id="map"></div>
        </div>
    </div>

    <!-- Pages noted in footer need to be created -->
    <footer class="site-footer">
        <nav class="footer-nav">
            <ul>
                <li><a href="#methodology">Methodology</a></li>
                <li><a href="#contact">Contact</a></li>
                <li><a href="#about">About</a></li>
            </ul>
        </nav>
    </footer>

    <!-- load leaflet -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <!-- leaflet draw -->
    <script src="https://cdn.jsdelivr.net/npm/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>
    <!-- library for handling zipped shapefiles -->
    <script src="https://unpkg.com/shpjs@latest/dist/shp.min.js"></script>
    <script src="https://unpkg.com/shapefile@latest/shapefile.min.js"></script>
    <!-- Leaflet filelayer for handling file uploads directly -->
    <script src="https://unpkg.com/leaflet-filelayer/dist/leaflet.filelayer.js"></script>
    <!-- georaster api -->
    <script src="https://unpkg.com/georaster"></script>
    <!-- georaster layer for leaflet -->
    <script src="https://unpkg.com/georaster-layer-for-leaflet/dist/georaster-layer-for-leaflet.min.js"></script>
    <script src="js/HeaderImage.js"></script>
    <!-- jquery for veg map table -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
    <script type="module" src="js/vegMapTable.js"></script>
    <!-- global javascript file -->
    <script type="module" src="js/FireSeverity.js"></script>

</body>

</html>
